"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const lodash_kebabcase_1 = tslib_1.__importDefault(require("lodash.kebabcase"));
const chalk_1 = tslib_1.__importDefault(require("chalk"));
const os_1 = require("os");
function buildAllowedOptions(allowedOptions) {
    let options = Object.keys(allowedOptions);
    options = options.reduce((opts, opt) => {
        const alias = allowedOptions[opt].alias;
        if (alias) {
            opts.push(alias);
        }
        return opts;
    }, options);
    options.sort();
    return options;
}
function cliOption(opt) {
    return opt.length === 1 ? `"-${opt}"` : `"--${(0, lodash_kebabcase_1.default)(opt)}"`;
}
function buildMessageLine(invalid) {
    return `Invalid option ${chalk_1.default.red(cliOption(invalid))}.${os_1.EOL}`;
}
function checkInvalidCLIOptions(allowedOptions, inputOptions) {
    const allOptions = buildAllowedOptions(allowedOptions);
    return Object.keys(inputOptions)
        .filter((opt) => !allOptions.includes(opt))
        .reduce((msg, invalid) => {
        return msg + buildMessageLine(invalid);
    }, "");
}
exports.default = checkInvalidCLIOptions;
